# Muse v1.1 更新说明

## 🎉 重大更新

### 全新的项目浏览器界面

弹窗不再是编辑器，而是一个强大的**项目和文件管理器**！

## ✨ 主要变化

### 1. 弹窗界面重新设计

**之前（v1.0）**：
- 弹窗是一个简单的编辑器
- 无法使用输入法
- 文件管理不便

**现在（v1.1）**：
- 弹窗是项目浏览器
- 支持项目分组管理
- 搜索功能
- 展开/收起项目
- 快速定位文件

### 2. 项目管理功能

#### 新功能：
- ✅ 创建项目
- ✅ 重命名项目
- ✅ 删除项目
- ✅ 项目描述
- ✅ 项目展开/收起

#### 项目结构：
```
📁 工作笔记
  ├── 📄 会议记录.md
  ├── 📄 项目规划.md
  └── 📄 周报.md

📁 学习笔记
  ├── 📄 React教程.md
  └── 📄 Vue入门.md
```

### 3. 搜索功能

- 🔍 实时搜索项目和文件
- 🔍 同时匹配项目名称和文件名
- 🔍 即时过滤显示结果

### 4. 完整编辑器（保留）

- 💻 在独立标签页中打开
- ✅ 完全支持输入法
- ✅ 所有编辑功能
- ✅ Git 版本控制

### 5. 数据结构升级

**之前**：
```javascript
{
  "files": {
    "文件名.md": { /* 文件数据 */ }
  }
}
```

**现在**：
```javascript
{
  "projects": {
    "project_id": {
      "id": "project_id",
      "name": "项目名称",
      "description": "项目描述",
      "files": {
        "文件名.md": { /* 文件数据 */ }
      }
    }
  }
}
```

### 6. 自动数据迁移

- ✅ 旧版本文件自动迁移到"默认项目"
- ✅ 无需手动操作
- ✅ 不会丢失数据

## 📁 新增文件

### HTML
- `popup.html` - 重写为项目浏览器界面
- `editor.html` - 保持不变

### CSS
- `popup-browser.css` - 项目浏览器样式（新增）
- `styles.css` - 编辑器样式（保留）

### JavaScript
- `popup-browser.js` - 项目浏览器逻辑（新增）
- `editor.js` - 编辑器逻辑（从 popup.js 独立）
- `popup.js` - 旧编辑器逻辑（保留作为备份）

### 文档
- `PROJECT_BROWSER.md` - 项目浏览器使用指南（新增）
- `UPDATE_v1.1.md` - 本更新说明（新增）

## 🎯 使用方式变化

### v1.0 使用方式

```
点击 Muse 图标
↓
在弹窗中编辑（无法输入中文）
↓
或点击"打开编辑器"在标签页中编辑
```

### v1.1 使用方式（推荐）

```
点击 Muse 图标
↓
浏览项目和文件
↓
点击文件 → 自动在编辑器标签页打开
↓
编辑并保存
```

## 🚀 快速开始

### 第一次使用

1. **打开项目浏览器**
   - 点击浏览器工具栏 Muse 图标

2. **创建项目**
   - 点击"📁 新建项目"
   - 输入项目名称：如"工作笔记"
   - 输入描述（可选）
   - 点击"创建"

3. **创建文件**
   - 点击"📄 新建文件"
   - 选择项目
   - 输入文件名：如"会议记录.md"
   - 自动在编辑器中打开

4. **编辑保存**
   - 在编辑器中输入内容
   - 点击"💾 保存"
   - 完成！

### 后续使用

1. 点击 Muse 图标打开项目浏览器
2. 搜索或浏览找到文件
3. 点击文件名打开编辑
4. 编辑并保存

## 🎨 界面特点

### 项目卡片
- 白色背景
- 悬停显示阴影
- 展开状态有蓝色边框
- 平滑展开/收起动画

### 文件列表
- 浅灰色背景
- 显示修改时间
- 悬停显示操作按钮

### 搜索栏
- 顶部固定
- 实时过滤
- 紫色聚焦边框

### 操作按钮
- 悬停显示
- 平滑过渡动画
- 删除按钮红色警告

## 💾 数据兼容性

### 从 v1.0 升级

系统会自动检测旧数据并迁移：

```javascript
// v1.0 数据
{
  "files": {
    "note.md": { /* 文件数据 */ }
  }
}

// 自动迁移为 v1.1
{
  "projects": {
    "default": {
      "id": "default",
      "name": "默认项目",
      "description": "从旧版本迁移的文件",
      "files": {
        "note.md": { /* 文件数据 */ }
      }
    }
  }
}
```

### 向后兼容

- ✅ 编辑器功能完全保留
- ✅ Git 功能完全保留
- ✅ 所有快捷键保留
- ✅ 数据格式兼容

## 🔧 技术改进

### 代码组织
- 弹窗和编辑器逻辑分离
- 更清晰的模块划分
- 更易于维护和扩展

### 性能优化
- 项目列表虚拟滚动（未来）
- 搜索防抖优化（未来）
- 惰性加载大文件（未来）

### 用户体验
- 更直观的界面
- 更快的文件定位
- 更好的组织结构

## 📚 相关文档

- [PROJECT_BROWSER.md](PROJECT_BROWSER.md) - 项目浏览器详细使用指南
- [QUICKSTART.md](QUICKSTART.md) - 快速开始指南
- [EDITOR_TAB.md](EDITOR_TAB.md) - 完整编辑器使用说明
- [README.md](README.md) - 完整项目文档

## ⚠️ 注意事项

### 数据迁移
- 首次打开会自动迁移旧数据
- 迁移过程自动完成
- 不影响使用

### 功能变化
- 弹窗不再直接编辑
- 必须在编辑器标签页中编辑
- Git 功能仍在编辑器中

### 建议
- 建议创建多个项目分类管理
- 使用搜索功能快速定位
- 定期使用 Git 提交版本

## 🎯 未来计划

### v1.2（计划中）
- [ ] 项目颜色标签
- [ ] 文件标星收藏
- [ ] 最近打开列表
- [ ] 项目模板

### v1.3（计划中）
- [ ] 拖拽排序
- [ ] 文件移动
- [ ] 批量操作
- [ ] 导出项目

### v2.0（远期）
- [ ] 云端同步
- [ ] 多设备协同
- [ ] 团队协作
- [ ] 插件系统

## 🙏 感谢使用

感谢您使用 Muse！

如有问题或建议，欢迎反馈。

---

**立即体验全新的项目浏览器！**

点击浏览器工具栏的 Muse 图标开始使用吧！
