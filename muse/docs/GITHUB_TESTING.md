# GitHub 功能测试指南

## 测试前准备

1. 确保已重新加载 Chrome 扩展
2. 准备一个 GitHub Personal Access Token (权限: `repo`)

## 测试步骤

### 1. 测试连接功能

- [ ] 点击 "GitHub" 按钮,应显示登录对话框
- [ ] 输入无效 Token,应显示错误提示
- [ ] 输入有效 Token,应成功连接并显示项目列表
- [ ] 工具栏应显示用户头像和用户名
- [ ] GitHub 按钮图标应从 🔗 变为 ✓

### 2. 测试项目列表

- [ ] 项目列表应按更新时间排序
- [ ] 显示公开和私有仓库
- [ ] 每个项目显示:
  - [ ] 锁定图标 (私有) 或书本图标 (公开)
  - [ ] 项目名称
  - [ ] 项目描述
  - [ ] Star 数
  - [ ] Fork 数
  - [ ] 主要编程语言
  - [ ] 更新日期

### 3. 测试导入功能

**基础导入测试**
- [ ] 点击任意项目的 "导入" 按钮
- [ ] 应显示确认对话框 "确定要导入整个仓库..."
- [ ] 确认后应创建本地项目
- [ ] 项目名称应与 GitHub 仓库名称一致
- [ ] 项目应自动展开

**文件下载测试**
- [ ] 打开浏览器控制台 (F12)
- [ ] 应看到下载进度日志: "开始下载 X 个文件..."
- [ ] 应看到每个文件的下载进度: "已下载: X/Y - 文件路径"
- [ ] 下载完成后应显示提示: "项目 XXX 导入完成! 已下载 X 个文件"

**文件类型测试**
导入一个包含多种文件类型的仓库,验证:
- [ ] .md 文件已导入 (如 README.md, CHANGELOG.md)
- [ ] .txt 文件已导入
- [ ] .js 文件已导入
- [ ] .json 文件已导入 (如 package.json)
- [ ] .css 文件已导入
- [ ] .html 文件已导入
- [ ] .yml/.yaml 文件已导入
- [ ] LICENSE 文件已导入
- [ ] 二进制文件(图片、PDF等)未导入

**文件路径测试**
- [ ] 子目录中的文件路径保留完整 (如 `src/utils/helper.js`)
- [ ] 可以在文件列表中看到完整路径
- [ ] 可以点击打开并编辑这些文件

**大型仓库测试**
导入一个超过 100 个文本文件的仓库:
- [ ] 应限制在 100 个文件
- [ ] 提示信息应显示: "已下载 X 个文本文件(共 Y 个,已限制最多 100 个)"
- [ ] 文件列表应实时更新(每批次 5 个文件后更新)

**性能测试**
- [ ] 导入 50 个文件的仓库应在 1 分钟内完成
- [ ] 下载过程中浏览器不应卡顿
- [ ] 批量下载应是 5 个并发(从控制台日志观察)

### 4. 测试刷新和断开

- [ ] 点击 🔄 按钮,应重新加载项目列表
- [ ] 点击 🚪 按钮,应显示确认对话框
- [ ] 确认断开后:
  - [ ] 用户头像和用户名应消失
  - [ ] GitHub 按钮图标应恢复为 🔗
  - [ ] 再次点击 GitHub 按钮应显示登录对话框

### 5. 测试 UI 和交互

- [ ] 对话框可以通过 ✕ 按钮关闭
- [ ] 对话框可以通过 ESC 键关闭 (取决于浏览器)
- [ ] 在 Token 输入框按 Enter 键应提交
- [ ] 项目列表可以滚动
- [ ] 鼠标悬停项目卡片时应有高亮效果
- [ ] 加载时应显示 spinner 动画

### 6. 测试数据持久化

- [ ] 连接 GitHub 后关闭插件
- [ ] 重新打开插件
- [ ] 应保持登录状态
- [ ] 用户头像和用户名应显示
- [ ] 再次点击 GitHub 按钮应直接显示项目列表

## 已知限制

- 当前只导入文本文件 (.md, .txt, .js, .json, .css, .html, .yml, .xml, LICENSE, README)
- 默认最多导入 100 个文件 (可在代码中调整 `maxFiles` 参数)
- 不支持导入二进制文件 (图片、视频、PDF 等)
- 不支持同步修改回 GitHub
- API 请求受 GitHub 速率限制约束 (5000次/小时)
- 下载进度只在浏览器控制台显示,没有可视化进度条

## 错误场景测试

- [ ] 网络断开时点击 GitHub 按钮
- [ ] Token 过期或被撤销
- [ ] 导入没有任何文本文件的项目 (应创建空项目)
- [ ] 导入已存在的项目 (应创建新项目,不覆盖)
- [ ] 导入过程中关闭弹窗 (下载应继续在后台进行)
- [ ] 超过 GitHub API 速率限制时的错误处理
- [ ] 导入包含超大文件的仓库 (> 1MB 的单文件)

## 浏览器兼容性

测试环境:
- [ ] Chrome 最新版本
- [ ] Edge 最新版本
- [ ] 其他 Chromium 浏览器

---

完成测试后,请记录任何发现的问题或建议。
